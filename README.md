# JvmRamCostMonitor

Кроссплатформенный монитор потребления RAM процессами с GUI на PyROOT, аналогичный VisualVM, но с дополнительными метриками offheap памяти.

## Возможности

- **Кроссплатформенность**: Linux и Windows
- **Метрики памяти**:
  - Linux: RSS, PSS, USS
  - Windows: Working Set, Private Working Set, Private Bytes
  - JMX: NMT, Used Heap, Committed Heap
- **Мониторинг группы процессов**: с опцией включения потомков
- **Режимы отображения**: кумулятивный или раздельный для группы процессов
- **Управление Java процессами**: GC, Heap Dump
- **Графики**: отображение всех метрик на едином графике
- **Настройка отображения**: выбор видимых метрик

## Требования

- Python >= 3.8
- ROOT (PyROOT) - должен быть установлен в системе
- JDK с утилитой `jps` (для обнаружения Java процессов)
- psutil >= 5.9.0
- jpype1 >= 1.4.0 (для JMX подключения)

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что ROOT установлен и доступен:
```bash
python -c "import ROOT; print(ROOT.__version__)"
```

3. Убедитесь, что `jps` доступен в PATH:
```bash
jps -l
```

## Использование

Запустите приложение:
```bash
python main.py
```

### Интерфейс

- **Левая панель**: список Java процессов, настройки мониторинга
- **Центральная область**: график потребления памяти
- **Нижняя панель**: кнопки управления (GC, Heap Dump, сохранение) и настройки отображения метрик

### Интервалы опроса

- RSS (Linux): 5 сек
- PSS/USS (Linux): 30 сек
- Working Set (Windows): 5 сек
- Private Working Set/Private Bytes (Windows): 10 сек
- JMX метрики: 5 сек

### Настройки

- **Включать потомки**: при включении мониторинг распространяется на все дочерние процессы
- **Режим группы**: 
  - Кумулятивный: суммирование метрик всех процессов группы
  - Раздельный: отдельные графики для каждого процесса

## Примечания

- JMX подключение работает только для локальных процессов
- Для работы JMX функций (GC, Heap Dump) процесс должен быть запущен с соответствующими опциями JMX
- NMT метрики требуют включения Native Memory Tracking в Java процессе

## Структура проекта

```
JvmRamCostMonitor/
├── main.py                 # Точка входа
├── config.py               # Конфигурация
├── memory_monitor.py       # Сбор метрик памяти
├── jmx_client.py           # JMX клиент
├── process_manager.py      # Управление процессами
├── ui/                     # UI компоненты
│   ├── main_window.py
│   ├── process_panel.py
│   ├── graph_panel.py
│   └── controls_panel.py
└── requirements.txt
```

